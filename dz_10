Задания на БД vk:
/*1. Проанализировать какие запросы могут выполняться наиболее часто в процессе работы приложения и добавить необходимые индексы.*/

-- Добавим индекс из урока
CREATE INDEX media_user_id_media_type_id_idx ON media (user_id, media_type_id);  

-- часто просматривают друзей пользователя, добавляем два индекса
CREATE INDEX friendship_user_id_friend_id_idx ON media (user_id, friend_id);
CREATE INDEX friendship_friend_id_user_id_idx ON media (friend_id, user_id);

-- Лайкуют много, и люди любят просматривать кто-что лайкнул
CREATE INDEX likes_user_id_target_id_like_type_id_idx ON media (user_id, target_id, like_type_id);

-- Сообщений всегда очень много. Вся история переписки с другом заслуживает индекса. 
CREATE INDEX messages_from_user_id_to_user_id_created_at_idx ON media (from_user_id, to_user_id, created_at);
CREATE INDEX messages_to_user_id_from_user_id_created_at_idx ON media (to_user_id, from_user_id, created_at);


-- Возможно имело бы смысл поставить индексы на: город+пользователь, город+пол, на fullname и т.д. но, без статистики такие решения лучше не принимать.